import{ai as X,a7 as z,w as i,x as B,j as e,aK as J,aL as s,aN as m,aM as K,a6 as o,U as S,aT as F,aQ as D,aR as E,aX as Z,ba as ee,bb as _,Z as te,y as re,P,b1 as M,a1 as se,W as ae,Y as ne,T as ie,X as oe}from"./mui-core-CYh47w52.js";import{a as c}from"./react-vendor-Unh15Wwx.js";import{S as le,A as de,H as ce,D as me}from"./Footer-CucpbUKZ.js";import{A as xe}from"./index-BQkMXUem.js";import{aJ as pe,ba as he,aw as ue,ab as be,bb as ge,d as N,bc as ye,bd as je,be as H}from"./mui-icons-cXbC8oYI.js";import{a as j}from"./utils-DW_MHI2K.js";import{m as x,A as U}from"./animations-DgULrZqg.js";import"./ColorModeIconDropdown-CNzznYCL.js";import"./mui-DFEj5VrK.js";const f="https://replai.tech",fe={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},v={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:300,damping:24}}};function Te(L){const a=X(),Y=z(a.breakpoints.down("sm"));z(a.breakpoints.down("md"));const[p,I]=c.useState(null),[C,$]=c.useState(""),[b,g]=c.useState([]),[k,A]=c.useState({}),[h,y]=c.useState(null),[R,T]=c.useState(!1);c.useEffect(()=>{V()},[]);const V=async()=>{try{const t=await j.get(`${f}/api/feedback/all`),r=t.data;g(t.data)}catch(t){console.error("Error fetching feedback:",t)}},G=async t=>{t.preventDefault(),T(!0);try{const r=localStorage.getItem("token");if(!r){console.error("No token found");return}const n=await j.post(`${f}/api/feedback/submit`,{rating:p,comments:C},{headers:{Authorization:`Bearer ${r}`}});g(d=>[n.data,...d]),I(null),$(""),y({type:"success",message:"Your feedback has been submitted successfully! Thank you for helping us improve."}),setTimeout(()=>y(null),5e3)}catch(r){console.error("Error submitting feedback:",r),y({type:"error",message:"Please provide both a rating and comment before submitting feedback."})}finally{T(!1)}},O=async t=>{try{const r=localStorage.getItem("token");if(!r){console.error("No token found");return}if(!k[t]?.trim())return;const n=await j.post(`${f}/api/feedback/comment/${t}`,{comment:k[t]},{headers:{Authorization:`Bearer ${r}`}});g(d=>d.map(u=>u._id===t?n.data:u)),A(d=>({...d,[t]:""}))}catch(r){console.error("Error submitting comment:",r)}},q=async t=>{try{const r=localStorage.getItem("token");if(!r){console.error("No token found");return}const n=await j.post(`${f}/api/feedback/like/${t}`,{},{headers:{Authorization:`Bearer ${r}`}});g(d=>d.map(u=>u._id===t?n.data:u))}catch(r){console.error("Error liking feedback:",r)}},Q=(t,r)=>{A(n=>({...n,[t]:r}))},W=t=>{if(!t)return"";const r=new Date(t);return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(r)},l=a.palette.primary.main,w=a.palette.secondary.main;return`${i(l,.15)}${i(w,.05)}`,`${l}${a.palette.mode==="dark"?B(w,.1):w}`,e.jsxs(xe,{...L,children:[e.jsx(J,{enableColorScheme:!0}),e.jsxs(s,{sx:{display:"flex"},children:[e.jsx(le,{}),e.jsx(de,{}),e.jsxs(s,{component:"main",sx:t=>({flexGrow:1,backgroundColor:i(t.palette.background.default,1),overflow:"auto",minHeight:"100vh"}),children:[e.jsx(m,{spacing:2,sx:{alignItems:"center",mx:{xs:1,sm:2,md:3},pb:2,mt:{xs:8,md:0}},children:e.jsx(ce,{})}),e.jsx(K,{maxWidth:"lg",children:e.jsxs(s,{component:x.div,variants:fe,initial:"hidden",animate:"visible",sx:{px:{xs:1,sm:2},py:3},children:[e.jsxs(s,{component:x.div,variants:v,sx:{mb:5,textAlign:"center"},children:[e.jsx(o,{variant:Y?"h4":"h3",component:"h1",sx:{fontWeight:800,background:"linear-gradient(90deg,rgb(0, 98, 255),rgb(43, 156, 255))",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",mb:1},children:"Your Feedback Matters"}),e.jsx(o,{variant:"body1",color:"text.secondary",sx:{maxWidth:700,mx:"auto",mb:3,px:2},children:"Help us build a better experience by sharing your thoughts and suggestions. Every opinion helps us improve."}),e.jsx(m,{direction:{xs:"row",sm:"row"},spacing:{xs:1,sm:3},justifyContent:"center",sx:{mt:2},width:1,children:[{icon:e.jsx(pe,{}),label:"Top rated product"},{icon:e.jsx(he,{}),label:`${b.length} feedbacks`},{icon:e.jsx(ue,{}),label:"Constant improvements"}].map((t,r)=>e.jsx(S,{icon:t.icon,label:t.label,variant:"outlined",color:"primary",sx:{borderRadius:"16px",px:1,"& .MuiChip-icon":{color:l},width:{xs:"30%",sm:"auto"}}},r))})]}),e.jsx(s,{sx:{mb:8,alignItems:"center",background:`radial-gradient(circle, ${i(l,.2)} 0%, transparent 70%)`},children:e.jsx(F,{item:!0,xs:12,md:7,children:e.jsx(s,{component:x.div,variants:v,sx:{background:`radial-gradient(circle, ${i(l,.2)} 0%, transparent 70%)`},children:e.jsx(D,{elevation:0,sx:{borderRadius:4,overflow:"hidden",border:1,borderColor:"divider",boxShadow:a.palette.mode==="dark"?`0 8px 32px ${i(a.palette.common.black,.2)}`:`0 8px 32px ${i(a.palette.primary.main,.1)}`},children:e.jsxs(E,{sx:{p:{xs:3,sm:4}},children:[e.jsx(U,{mode:"wait",children:h&&e.jsx(x.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0},children:e.jsxs(Z,{severity:h.type,variant:"filled",onClose:()=>y(null),sx:{mb:3,borderRadius:2,boxShadow:`0 4px 12px ${i(h.type==="success"?a.palette.success.main:a.palette.error.main,.2)}`},children:[e.jsx(ee,{sx:{fontWeight:600},children:h.type==="success"?"Thank You!":"Action Required"}),h.message]})})}),e.jsxs(s,{component:"form",onSubmit:G,noValidate:!0,children:[e.jsxs(o,{variant:"body1",sx:{fontWeight:600,mb:1,display:"flex",alignItems:"center",gap:1},children:[e.jsx(be,{fontSize:"small",color:"primary"}),"How would you rate your experience?"]}),e.jsxs(s,{sx:{mb:4,display:"flex",alignItems:"left",flexDirection:"column",mt:3},children:[e.jsx(_,{name:"feedback-rating",value:p,onChange:(t,r)=>I(r),size:"large",sx:{mb:1,"& .MuiRating-iconFilled":{color:a.palette.primary.main}}}),e.jsx(o,{variant:"caption",color:"text.secondary",children:p?p<3?"We'll work on improving":p<5?"Thanks! We're doing well":"Excellent! Thank you":"Select a rating"})]}),e.jsxs(o,{variant:"body1",sx:{fontWeight:600,mb:1,display:"flex",alignItems:"center",gap:1},children:[e.jsx(ge,{fontSize:"small",color:"primary"}),"Tell us more about your experience"]}),e.jsx(F,{item:!0,xs:12,children:e.jsx("textarea",{name:"textarea",id:"textarea",rows:6,cols:65,required:!0,style:{width:"100%",height:"100%",padding:"10px",borderRadius:"5px",border:".5px solid rgba(142, 142, 142, 0.48)",backgroundColor:"transparent",resize:"none"},placeholder:"Comments",value:C,onChange:t=>$(t.target.value),children:C})}),e.jsx(te,{type:"submit",variant:"contained",disabled:R,endIcon:e.jsx(N,{}),sx:{mt:3,fontSize:"1rem",py:1.2,px:3,borderRadius:2,textTransform:"none",fontWeight:600,boxShadow:`0 4px 14px ${i(a.palette.primary.main,.3)}`,background:a.palette.mode==="dark"?`linear-gradient(90deg, ${l}, ${re(l,.2)})`:`linear-gradient(90deg, ${l}, ${B(l,.1)})`,"&:hover":{boxShadow:`0 6px 20px ${i(a.palette.primary.main,.4)}`}},children:R?"Submitting...":"Submit Feedback"})]})]})})})})}),e.jsxs(s,{component:x.div,variants:v,sx:{mb:3},children:[e.jsxs(s,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"flex-start",sm:"center"},mb:4},children:[e.jsxs(s,{children:[e.jsx(o,{variant:"h4",component:"h2",fontWeight:700,sx:{mb:1},children:"Community Feedback"}),e.jsx(o,{variant:"body1",color:"text.secondary",children:"See what others are saying about Replai"})]}),e.jsx(S,{label:`${b.length} Contributions`,color:"primary",variant:"outlined",sx:{mt:{xs:2,sm:0},fontWeight:500,px:1,borderRadius:"12px"}})]}),e.jsx(U,{children:b.length===0?e.jsxs(P,{elevation:0,sx:{p:4,textAlign:"center",borderRadius:4,border:`1px dashed ${i(a.palette.divider,.8)}`},children:[e.jsx(o,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"Be the first to share your thoughts!"}),e.jsx(o,{variant:"body2",color:"text.secondary",children:"No feedback has been submitted yet. Your opinion could be the first."})]}):e.jsx(m,{spacing:3,children:b.map((t,r)=>e.jsx(s,{component:x.div,variants:v,custom:r,initial:"hidden",animate:"visible",exit:{opacity:0,y:20},children:e.jsx(D,{elevation:0,sx:{borderRadius:3,border:`1px solid ${i(a.palette.divider,.6)}`,transition:"all 0.3s ease","&:hover":{borderColor:i(a.palette.primary.main,.3),boxShadow:`0 4px 20px ${i(a.palette.primary.main,.1)}`}},children:e.jsxs(E,{sx:{p:{xs:2,sm:3}},children:[e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:{xs:"flex-start",sm:"center"},flexDirection:{xs:"column",sm:"row"},mb:2},children:[e.jsxs(m,{direction:"row",spacing:2,alignItems:"center",sx:{mb:{xs:1,sm:0}},children:[e.jsx(M,{alt:t.name||"anonymous",src:t.userId?.profilePicture||"",sx:{width:48,height:48,border:`2px solid ${i(a.palette.primary.main,.2)}`}}),e.jsxs(s,{children:[e.jsx(o,{variant:"subtitle1",fontWeight:600,children:t.name||t.userId?.name||"Anonymous User"}),e.jsx(_,{value:t.rating,readOnly:!0,size:"small",sx:{mt:.5}})]})]}),e.jsx(o,{variant:"caption",color:"text.secondary",sx:{mt:{xs:0,sm:.5}},children:W(t.createdAt)||"Recently"})]}),e.jsx(se,{sx:{mb:2}}),e.jsx(s,{sx:{py:1,px:{xs:0,sm:1},mb:3,minHeight:"60px"},children:e.jsx(o,{variant:"body1",children:t.comments})}),e.jsxs(m,{direction:"row",spacing:1,alignItems:"center",sx:{mb:2},children:[e.jsx(ae,{title:"Like this feedback",children:e.jsx(ne,{"aria-label":"like",onClick:()=>q(t._id),color:t.likes?.includes(localStorage.getItem("userId")||"")?"primary":"default",sx:{borderRadius:2,transition:"transform 0.2s","&:hover":{transform:"scale(1.1)"}},children:t.likes?.includes(localStorage.getItem("userId")||"")?e.jsx(ye,{}):e.jsx(je,{})})}),e.jsxs(o,{variant:"body2",fontWeight:500,children:[t.likes?.length||0," likes"]}),e.jsx(s,{sx:{flexGrow:1}}),e.jsx(S,{icon:e.jsx(H,{sx:{fontSize:"1rem !important"}}),label:`${t.feedbackComments?.length||0} comments`,size:"small",variant:"outlined",sx:{borderRadius:"12px",height:28}})]}),t.feedbackComments?.length>0&&e.jsxs(P,{elevation:0,sx:{bgcolor:`radial-gradient(circle, ${i(l,.2)} 0%, transparent 70%)`,p:2,borderRadius:2,mb:2,border:1,borderColor:"divider"},children:[e.jsxs(o,{variant:"subtitle2",sx:{mb:1.5,display:"flex",alignItems:"center",gap:.5},children:[e.jsx(H,{fontSize:"small",color:"primary"}),"Comments"]}),e.jsx(m,{spacing:1.5,children:t.feedbackComments.map(n=>e.jsxs(s,{sx:{display:"flex",gap:1.5},children:[e.jsx(M,{alt:n.userId?.name||"anonymous",src:n.userId?.profilePicture||"",sx:{width:32,height:32}}),e.jsxs(s,{sx:{flex:1},children:[e.jsxs(s,{sx:{bgcolor:`radial-gradient(circle, ${i(l,.2)} 0%, transparent 70%)`,p:1.5,borderRadius:"0 16px 16px 16px",border:1,borderColor:"divider"},children:[e.jsx(o,{variant:"body2",sx:{fontWeight:500,mb:.5},children:n.userId?.name||"Anonymous"}),e.jsx(o,{variant:"body2",children:n.comment})]}),e.jsx(o,{variant:"caption",color:"text.secondary",sx:{ml:1,mt:.5},children:W(n.createdAt)||"Recently"})]})]},n._id))})]}),e.jsx(s,{component:"form",onSubmit:n=>{n.preventDefault(),O(t._id)},noValidate:!0,children:e.jsx(ie,{placeholder:"Add a comment...",variant:"outlined",fullWidth:!0,size:"small",value:k[t._id]||"",onChange:n=>Q(t._id,n.target.value),InputProps:{sx:{borderRadius:3},endAdornment:e.jsx(oe,{position:"end",children:e.jsx(N,{})})}})})]})})},t._id))})})]})]})}),e.jsx(me,{})]})]})]})}export{Te as default};
