import{j as e}from"./index-LEzleD7k.js";import{r as d}from"./react-vendor-CegxkP7k.js";import{a as N}from"./utils-DohQasZF.js";import{a4 as F,q as G,cu as z,cv as k,am as H,cw as J,ao as K,w as Q,M as X,G as Y}from"./mui-icons-CWiuJqrV.js";import{u as Z}from"./EmailManager-CQNgsN1d.js";import{r as _,f as C,w as a,a7 as m,aw as h,al as ee,T as f,au as te,C as g,k as se,O as oe,at as ne,M as y,ay as D,az as R}from"./mui-core-z5vaI-Hz.js";import{m as A}from"./animations-DFv3qG-P.js";import"./Footer-C98yKtTp.js";import"./ColorModeIconDropdown-2Y3cz41X.js";import"./mui-BKcTmHCX.js";import"./data-grid-BAJ3yR7o.js";import"./treeView-CTf4X_V6.js";const E="https://replai.tech";function xe({refreshTrigger:M}){const s=_(),{enqueueSnackbar:r}=Z(),[p,v]=d.useState([]),[$,b]=d.useState(!0),[U,j]=d.useState(null),[V,I]=d.useState(null),[i,w]=d.useState(null);d.useEffect(()=>{(async()=>{b(!0),j(null);const o=localStorage.getItem("token");if(!o){b(!1),j("Authentication required");return}try{const n=await N.get(`${E}/api/emails/auth/connected`,{headers:{Authorization:`Bearer ${o}`}});v(n.data),b(!1)}catch(n){console.error("Error fetching connected emails:",n),j("Failed to load connected email accounts"),b(!1)}})()},[M]);const B=(t,o)=>{I(t.currentTarget),w(o)},x=()=>{I(null),w(null)},O=async t=>{x();const o=localStorage.getItem("token");if(!o){r("Authentication required",{variant:"error"});return}try{r("Syncing email account...",{variant:"info"}),await N.post(`${E}/api/emails/${t}/sync`,{},{headers:{Authorization:`Bearer ${o}`}}),r("Email account synced successfully",{variant:"success"})}catch(n){console.error("Error syncing email:",n),r("Failed to sync email account",{variant:"error"})}},P=async(t,o)=>{x();const n=localStorage.getItem("token");if(!n){r("Authentication required",{variant:"error"});return}const u=o==="active"?"paused":"active";try{await N.patch(`${E}/api/emails/${t}/status`,{status:u},{headers:{Authorization:`Bearer ${n}`}}),v(l=>l.map(c=>c.id===t?{...c,status:u}:c)),r(`Email account ${u==="active"?"activated":"paused"}`,{variant:"success"})}catch(l){console.error("Error toggling email status:",l),r("Failed to update email account status",{variant:"error"})}},T=async t=>{x();const o=localStorage.getItem("token");if(!o){r("Authentication required",{variant:"error"});return}try{await N.delete(`${E}/api/emails/auth/${t}`,{headers:{Authorization:`Bearer ${o}`}}),v(n=>n.filter(u=>u.id!==t)),r("Email account disconnected successfully",{variant:"success"})}catch(n){console.error("Error disconnecting email:",n),r("Failed to disconnect email account",{variant:"error"})}},q=t=>{switch(t){case"google":return e.jsxDEV(Y,{sx:{color:"#DB4437"}},void 0,!1,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:178,columnNumber:16},this);case"microsoft":return e.jsxDEV(X,{sx:{color:"#0078D4"}},void 0,!1,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:180,columnNumber:16},this);case"custom":default:return e.jsxDEV(Q,{sx:{color:"#673AB7"}},void 0,!1,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:183,columnNumber:16},this)}},L=t=>{const o=new Date(t),u=new Date().getTime()-o.getTime(),l=Math.floor(u/6e4);if(l<1)return"Just now";if(l<60)return`${l} min${l>1?"s":""} ago`;const c=Math.floor(l/60);if(c<24)return`${c} hour${c>1?"s":""} ago`;const S=Math.floor(c/24);return S<7?`${S} day${S>1?"s":""} ago`:o.toLocaleDateString()},W={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{delay:.3,duration:.5}}};return $?e.jsxDEV(C,{elevation:0,sx:{p:3,borderRadius:3,border:"1px solid",borderColor:a(s.palette.divider,.1)},children:[e.jsxDEV(m,{sx:{mb:2},children:e.jsxDEV(h,{variant:"text",width:200,height:24},void 0,!1,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:227,columnNumber:11},this)},void 0,!1,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:226,columnNumber:9},this),[1,2].map(t=>e.jsxDEV(m,{sx:{mb:2,display:"flex",alignItems:"center"},children:[e.jsxDEV(h,{variant:"circular",width:40,height:40,sx:{mr:2}},void 0,!1,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:232,columnNumber:13},this),e.jsxDEV(m,{sx:{flex:1},children:[e.jsxDEV(h,{variant:"text",width:"60%"},void 0,!1,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:234,columnNumber:15},this),e.jsxDEV(h,{variant:"text",width:"40%"},void 0,!1,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:235,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:233,columnNumber:13},this),e.jsxDEV(h,{variant:"circular",width:24,height:24},void 0,!1,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:237,columnNumber:13},this)]},t,!0,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:231,columnNumber:11},this))]},void 0,!0,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:217,columnNumber:7},this):U?e.jsxDEV(ee,{severity:"error",sx:{borderRadius:3,mb:3},children:U},void 0,!1,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:246,columnNumber:7},this):p.length===0?e.jsxDEV(C,{component:A.div,variants:W,initial:"hidden",animate:"visible",elevation:0,sx:{p:4,borderRadius:3,border:"1px solid",borderColor:a(s.palette.divider,.1),textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:200},children:[e.jsxDEV(m,{sx:{mb:2,p:2,borderRadius:"50%",backgroundColor:a(s.palette.primary.main,.1),display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxDEV(F,{sx:{fontSize:40,color:s.palette.primary.main,opacity:.8}},void 0,!1,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:290,columnNumber:11},this)},void 0,!1,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:279,columnNumber:9},this),e.jsxDEV(f,{variant:"h6",gutterBottom:!0,children:"No Email Accounts Connected"},void 0,!1,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:292,columnNumber:9},this),e.jsxDEV(f,{variant:"body2",color:"text.secondary",sx:{maxWidth:400,mx:"auto"},children:"Connect your email accounts above to start automating responses and analyzing your email performance."},void 0,!1,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:295,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:260,columnNumber:7},this):e.jsxDEV(C,{elevation:0,sx:{borderRadius:3,border:"1px solid",borderColor:a(s.palette.divider,.1),overflow:"hidden"},children:[p.map((t,o)=>e.jsxDEV(d.Fragment,{children:[e.jsxDEV(m,{component:A.div,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:o*.1,duration:.3},sx:{p:3,display:"flex",alignItems:"center",gap:2,backgroundColor:t.status==="error"?a(s.palette.error.main,.05):"transparent"},children:[e.jsxDEV(te,{src:t.avatarUrl,alt:t.displayName||t.email,sx:{width:48,height:48,bgcolor:a(s.palette.primary.main,.1)},children:q(t.provider)},void 0,!1,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:330,columnNumber:13},this),e.jsxDEV(m,{sx:{flex:1},children:[e.jsxDEV(m,{sx:{display:"flex",alignItems:"center",mb:.5},children:[e.jsxDEV(f,{variant:"subtitle1",sx:{fontWeight:500},children:t.displayName||t.email.split("@")[0]},void 0,!1,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:345,columnNumber:17},this),t.status==="active"&&e.jsxDEV(g,{size:"small",icon:e.jsxDEV(G,{sx:{fontSize:"0.75rem !important"}},void 0,!1,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:352,columnNumber:27},this),label:"Active",sx:{ml:1.5,height:20,fontSize:"0.7rem",fontWeight:500,backgroundColor:a(s.palette.success.main,.1),color:s.palette.success.main,"& .MuiChip-icon":{color:s.palette.success.main}}},void 0,!1,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:350,columnNumber:19},this),t.status==="paused"&&e.jsxDEV(g,{size:"small",icon:e.jsxDEV(z,{sx:{fontSize:"0.75rem !important"}},void 0,!1,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:369,columnNumber:27},this),label:"Paused",sx:{ml:1.5,height:20,fontSize:"0.7rem",fontWeight:500,backgroundColor:a(s.palette.warning.main,.1),color:s.palette.warning.main,"& .MuiChip-icon":{color:s.palette.warning.main}}},void 0,!1,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:367,columnNumber:19},this),t.status==="error"&&e.jsxDEV(g,{size:"small",label:"Error",sx:{ml:1.5,height:20,fontSize:"0.7rem",fontWeight:500,backgroundColor:a(s.palette.error.main,.1),color:s.palette.error.main}},void 0,!1,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:384,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:344,columnNumber:15},this),e.jsxDEV(f,{variant:"body2",color:"text.secondary",children:t.email},void 0,!1,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:399,columnNumber:15},this),t.status==="error"&&t.error&&e.jsxDEV(f,{variant:"caption",sx:{color:s.palette.error.main,display:"block",mt:.5},children:["Error: ",t.error]},void 0,!0,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:404,columnNumber:17},this),e.jsxDEV(m,{sx:{display:"flex",alignItems:"center",mt:.5,color:s.palette.text.secondary,fontSize:"0.75rem"},children:[e.jsxDEV(k,{sx:{fontSize:"0.875rem",mr:.5,opacity:.7}},void 0,!1,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:425,columnNumber:17},this),"Last synced ",L(t.lastSynced)]},void 0,!0,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:416,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:343,columnNumber:13},this),e.jsxDEV(se,{size:"small",onClick:n=>B(n,t.id),sx:{color:s.palette.text.secondary,"&:hover":{backgroundColor:a(s.palette.action.active,.05)}},children:e.jsxDEV(H,{fontSize:"small"},void 0,!1,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:441,columnNumber:15},this)},void 0,!1,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:431,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:314,columnNumber:11},this),o<p.length-1&&e.jsxDEV(oe,{sx:{mx:3,borderColor:a(s.palette.divider,.08)}},void 0,!1,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:446,columnNumber:13},this)]},t.id,!0,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:313,columnNumber:9},this)),e.jsxDEV(ne,{anchorEl:V,open:!!V,onClose:x,transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},PaperProps:{elevation:3,sx:{borderRadius:2,minWidth:180,mt:.5,"& .MuiMenuItem-root":{py:1.2,px:2}}},children:[e.jsxDEV(y,{onClick:()=>i&&O(i),children:[e.jsxDEV(D,{children:e.jsxDEV(k,{fontSize:"small"},void 0,!1,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:476,columnNumber:13},this)},void 0,!1,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:475,columnNumber:11},this),e.jsxDEV(R,{children:"Sync Now"},void 0,!1,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:478,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:474,columnNumber:9},this),i&&e.jsxDEV(y,{onClick:()=>{const t=p.find(o=>o.id===i);t&&P(i,t.status)},children:[e.jsxDEV(D,{children:p.find(t=>t.id===i)?.status==="active"?e.jsxDEV(z,{fontSize:"small"},void 0,!1,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:490,columnNumber:17},this):e.jsxDEV(J,{fontSize:"small"},void 0,!1,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:492,columnNumber:17},this)},void 0,!1,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:488,columnNumber:13},this),e.jsxDEV(R,{children:p.find(t=>t.id===i)?.status==="active"?"Pause Account":"Activate Account"},void 0,!1,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:495,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:482,columnNumber:11},this),e.jsxDEV(y,{onClick:()=>i&&T(i),children:[e.jsxDEV(D,{children:e.jsxDEV(K,{fontSize:"small",sx:{color:s.palette.error.main}},void 0,!1,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:506,columnNumber:13},this)},void 0,!1,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:505,columnNumber:11},this),e.jsxDEV(R,{sx:{color:s.palette.error.main},children:"Disconnect"},void 0,!1,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:508,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:504,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:455,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/sumon/42-projects/Replai.tech/frontend/src/templates/dashboard/components/EmailConnectionStatus.tsx",lineNumber:303,columnNumber:5},this)}export{xe as default};
