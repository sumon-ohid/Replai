import{ai as Ae,j as e,aL as Te,aM as a,w as o,aO as I,a6 as r,aR as h,aS as p,at as De,as as j,Z as m,a3 as Ne,b2 as Ee,b9 as $e,aU as w,T as v,X as R,U as ze,a0 as Be,$ as Ue,D as Le,Y as L,K as Me,N as Fe,H as K,aQ as Q,ba as Ve,aY as Oe,ao as Ge,aW as He,aq as Ye,ab as Ze}from"./mui-core-C3ffLUwq.js";import{a as i}from"./react-vendor-Unh15Wwx.js";import{S as Xe,A as qe,H as Je,D as Ke}from"./Footer-Q6Op8PTj.js";import{u as Qe,A as _e}from"./index-D20Pene_.js";import{t as et,d as tt,a as st,c as at}from"./treeView-uPFLF-bj.js";import{e as rt,s as it,aR as nt,aS as ot,aT as lt,aU as dt,aV as ct,aW as xt,aX as ut,aD as ht,aY as M,aZ as F}from"./mui-icons-BgFiLgsU.js";import{m as W,A as pt}from"./animations-Dee_auZ3.js";import"./ColorModeIconDropdown-BtgzeTFD.js";import"./mui-B3oaDO5C.js";import"./utils-DW_MHI2K.js";import"./data-grid-o9Hnqe8f.js";const mt="https://replai.tech",bt={...at,...st,...tt,...et};function y(A){const{children:t,value:l,index:x,...b}=A;return e.jsx("div",{role:"tabpanel",hidden:l!==x,id:`settings-tabpanel-${x}`,"aria-labelledby":`settings-tab-${x}`,...b,children:l===x&&e.jsx(pt,{mode:"wait",children:e.jsx(W.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},transition:{duration:.3},children:e.jsx(a,{sx:{pt:3},children:t})},x)})})}const gt={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},_={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:260,damping:20}}};function At(A){const t=Ae(),[l,x]=i.useState(0),{user:b,updateProfilePicture:ee,updateUserName:te,updatePassword:se}=Qe(),[ae,V]=i.useState(b?.profilePicture||""),[re,T]=i.useState(!1),[ie,ne]=i.useState(""),[oe,le]=i.useState("success"),[D,de]=i.useState(b?.name||""),[ce,ft]=i.useState(b?.email||""),[N,O]=i.useState(""),[d,G]=i.useState(""),[u,H]=i.useState(""),[xe,E]=i.useState(!1),[Y,C]=i.useState("idle"),[$,ue]=i.useState(!1),[z,he]=i.useState(!1),[B,pe]=i.useState(!1),[P,Z]=i.useState(0),[S,k]=i.useState(!1),[me,be]=i.useState(!0),[ge,fe]=i.useState(!0),[je,ve]=i.useState("en"),[g,X]=i.useState(!1),[ye,U]=i.useState(!1),q=i.useRef(null),we=(s,n)=>{x(n)},Ce=()=>{U(!0)},Pe=()=>{U(!1),V(b?.profilePicture||"")},Se=async s=>{if(s.target.files?.[0]){const n=s.target.files[0];V(URL.createObjectURL(n));try{await ee(n),c("Profile picture updated successfully","success"),U(!1)}catch{c("Error updating profile picture","error")}}},ke=async()=>{k(!0);try{await te(D),c("Profile updated successfully","success"),X(!1)}catch{c("Error updating profile","error")}finally{k(!1)}},Ie=async()=>{if(d!==u){c("New passwords do not match","error");return}if(P<3){c("Password is not strong enough","error");return}k(!0);try{await se(N,d),c("Password updated successfully","success"),O(""),G(""),H(""),Z(0)}catch{c("Error updating password","error")}finally{k(!1)}},c=(s,n)=>{ne(s),le(n),T(!0)},Re=async()=>{C("deleting");try{const s=localStorage.getItem("token");if(!s)throw new Error("No token found");if(!(await fetch(`${mt}/api/user/account/delete`,{method:"DELETE",headers:{Authorization:`Bearer ${s}`}})).ok)throw new Error("Failed to delete account");C("success"),setTimeout(()=>window.location.href="/",2e3)}catch{C("error"),setTimeout(()=>C("idle"),2e3)}};i.useEffect(()=>{Z((n=>{if(!n)return 0;let f=0;return n.length>=8&&f++,/[A-Z]/.test(n)&&f++,/[0-9]/.test(n)&&f++,/[^A-Za-z0-9]/.test(n)&&f++,f})(d))},[d]);const J=()=>{switch(P){case 0:return t.palette.error.main;case 1:return t.palette.error.main;case 2:return t.palette.warning.main;case 3:return t.palette.success.light;case 4:return t.palette.success.main;default:return t.palette.error.main}},We=()=>{switch(P){case 0:return"Very Weak";case 1:return"Weak";case 2:return"Fair";case 3:return"Good";case 4:return"Strong";default:return"Very Weak"}};return e.jsxs(_e,{...A,themeComponents:bt,children:[e.jsx(Te,{enableColorScheme:!0}),e.jsxs(a,{sx:{display:"flex"},children:[e.jsx(Xe,{}),e.jsx(qe,{}),e.jsxs(a,{component:"main",sx:s=>({flexGrow:1,backgroundColor:o(s.palette.background.default,1),overflow:"auto",minHeight:"100vh"}),children:[e.jsx(I,{spacing:2,sx:{alignItems:"center",mx:{xs:2,sm:3},pb:2,mt:{xs:8,md:0}},children:e.jsx(Je,{})}),e.jsxs(a,{component:W.div,variants:gt,initial:"hidden",animate:"visible",sx:{mx:"auto",px:{xs:2,sm:3,md:4},pb:5},children:[e.jsxs(a,{component:W.div,variants:_,sx:{mb:3},children:[e.jsx(r,{variant:"h4",component:"h1",sx:{fontWeight:700,mb:1,background:"linear-gradient(90deg,rgb(0, 98, 255),rgb(43, 156, 255))",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Account Settings"}),e.jsx(r,{variant:"body1",color:"text.secondary",children:"Manage your personal information, security preferences and billing details"})]}),e.jsxs(a,{component:W.div,variants:_,sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:3},children:[e.jsx(a,{sx:{minWidth:{xs:"100%",md:260},maxWidth:{md:260},mt:{xs:0,md:3}},children:e.jsx(h,{elevation:0,sx:{borderRadius:"16px",border:`1px solid ${o(t.palette.divider,.8)}`,overflow:"hidden"},children:e.jsx(p,{sx:{p:0},children:e.jsxs(De,{value:l,onChange:we,orientation:"vertical",sx:{"& .MuiTab-root":{alignItems:"center",justifyContent:"flex-start",minHeight:60,px:2.5,textAlign:"left",textTransform:"none",fontWeight:500,fontSize:"0.95rem",borderLeft:"3px solid transparent","&.Mui-selected":{borderLeftColor:t.palette.primary.main,backgroundColor:o(t.palette.primary.main,.08)}},"& .MuiTabs-indicator":{display:"none"}},children:[e.jsx(j,{icon:e.jsx(rt,{}),iconPosition:"start",label:"Profile",id:"settings-tab-0","aria-controls":"settings-tabpanel-0"}),e.jsx(j,{icon:e.jsx(it,{}),iconPosition:"start",label:"Security",id:"settings-tab-1","aria-controls":"settings-tabpanel-1"}),e.jsx(j,{icon:e.jsx(nt,{}),iconPosition:"start",label:"Notifications",id:"settings-tab-3","aria-controls":"settings-tabpanel-3"}),e.jsx(j,{icon:e.jsx(ot,{}),iconPosition:"start",label:"Billing",id:"settings-tab-2","aria-controls":"settings-tabpanel-2"}),e.jsx(j,{icon:e.jsx(lt,{}),iconPosition:"start",label:"Appearance",id:"settings-tab-4","aria-controls":"settings-tabpanel-4"}),e.jsx(j,{icon:e.jsx(dt,{}),iconPosition:"start",label:"Data & Privacy",id:"settings-tab-5","aria-controls":"settings-tabpanel-5"})]})})})}),e.jsxs(a,{sx:{flexGrow:1},children:[e.jsx(y,{value:l,index:0,children:e.jsx(h,{elevation:0,sx:{borderRadius:"16px",border:`1px solid ${o(t.palette.divider,.8)}`,overflow:"hidden"},children:e.jsxs(p,{sx:{p:0},children:[e.jsxs(a,{sx:{p:3,mb:2,borderBottom:`1px solid ${t.palette.divider}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(r,{variant:"h6",sx:{fontWeight:600},children:"Personal Information"}),e.jsx(m,{startIcon:g?e.jsx(ct,{}):e.jsx(xt,{}),variant:g?"contained":"outlined",size:"small",onClick:()=>{g?ke():X(!0)},disabled:S,sx:{borderRadius:2},children:g?"Save":"Edit"})]}),e.jsxs(a,{sx:{px:3,pb:3},children:[e.jsxs(a,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},alignItems:{xs:"center",sm:"flex-start"},gap:3,mb:4},children:[e.jsxs(a,{sx:{position:"relative"},children:[e.jsx(Ne,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:e.jsx(a,{onClick:Ce,sx:{width:36,height:36,borderRadius:"50%",backgroundColor:t.palette.primary.main,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",border:`2px solid ${t.palette.background.paper}`,boxShadow:t.shadows[2],"&:hover":{backgroundColor:t.palette.primary.dark}},children:e.jsx(ut,{sx:{color:"#fff",fontSize:18}})}),children:e.jsx(Ee,{src:ae,alt:D,sx:{width:100,height:100,border:`3px solid ${t.palette.background.paper}`,boxShadow:`0 0 0 2px ${o(t.palette.primary.main,.3)}`}})}),e.jsxs($e,{in:ye,sx:{mt:2,textAlign:"center"},children:[e.jsxs(I,{direction:"row",spacing:1,justifyContent:"center",children:[e.jsx(m,{variant:"contained",size:"small",onClick:()=>q.current?.click(),sx:{borderRadius:2},children:"Choose File"}),e.jsx(m,{variant:"outlined",size:"small",onClick:Pe,sx:{borderRadius:2},children:"Cancel"})]}),e.jsx("input",{ref:q,type:"file",hidden:!0,accept:"image/*",onChange:Se})]})]}),e.jsxs(a,{sx:{flex:1,mt:1},children:[e.jsx(r,{variant:"subtitle1",sx:{fontWeight:600,mb:.5},children:"Profile Photo"}),e.jsx(r,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Upload a clear photo to help others recognize you. JPG or PNG format recommended."})]})]}),e.jsxs(w,{container:!0,spacing:3,children:[e.jsxs(w,{item:!0,xs:12,sm:6,children:[e.jsx(r,{variant:"subtitle1",sx:{fontWeight:100,mb:.5,ml:2,fontSize:"0.6rem"},children:"Full Name"}),e.jsx(v,{value:D,onChange:s=>de(s.target.value),variant:"outlined",fullWidth:!0,disabled:!g,InputProps:{sx:{borderRadius:2}}})]}),e.jsxs(w,{item:!0,xs:12,sm:6,children:[e.jsx(r,{variant:"subtitle1",sx:{fontWeight:100,mb:.5,ml:2,fontSize:"0.6rem"},children:"Email Address"}),e.jsx(v,{value:ce,variant:"outlined",fullWidth:!0,disabled:!0,InputProps:{sx:{borderRadius:2},endAdornment:e.jsx(R,{position:"end",children:e.jsx(ze,{label:"Verified",size:"small",color:"success",variant:"outlined",sx:{borderRadius:1}})})}})]}),e.jsx(w,{item:!0,xs:12,sm:6,children:e.jsxs(Be,{fullWidth:!0,variant:"outlined",children:[e.jsx(r,{variant:"subtitle1",sx:{fontWeight:100,mb:.5,ml:2,fontSize:"0.6rem"},children:"Language"}),e.jsx(Ue,{value:je,onChange:s=>ve(s.target.value),label:"Language",disabled:!g,sx:{borderRadius:2},children:e.jsx(Le,{value:"en",children:"English"})})]})}),e.jsxs(w,{item:!0,xs:12,sm:6,children:[e.jsx(r,{variant:"subtitle1",sx:{fontWeight:100,mb:.5,ml:2,fontSize:"0.6rem"},children:"Timezone"}),e.jsx(v,{value:"(UTC-auto) Coordinated Universal Time",variant:"outlined",fullWidth:!0,disabled:!0,InputProps:{sx:{borderRadius:2}}})]})]}),e.jsx(a,{sx:{mt:5,pt:4,borderTop:`1px solid ${t.palette.divider}`},children:e.jsxs(a,{sx:{p:3,borderRadius:2,backgroundColor:o(t.palette.error.main,.08),border:`1px solid ${o(t.palette.error.main,.2)}`},children:[e.jsx(r,{variant:"subtitle1",color:"error",sx:{fontWeight:600,mb:1},children:"Danger Zone"}),e.jsx(r,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Once you delete your account, there is no going back. Please be certain."}),e.jsx(m,{variant:"outlined",color:"error",onClick:()=>E(!0),startIcon:e.jsx(ht,{}),sx:{borderRadius:2},children:"Delete My Account"})]})})]})]})})}),e.jsx(y,{value:l,index:1,children:e.jsx(h,{elevation:0,sx:{borderRadius:"16px",border:`1px solid ${o(t.palette.divider,.8)}`},children:e.jsxs(p,{sx:{p:0},children:[e.jsx(a,{sx:{p:3,borderBottom:`1px solid ${t.palette.divider}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:e.jsx(r,{variant:"h6",sx:{fontWeight:600},children:"Password & Security"})}),e.jsxs(a,{sx:{p:3},children:[e.jsx(r,{variant:"subtitle1",sx:{mb:3,fontWeight:500},children:"Change Password"}),e.jsxs(I,{spacing:3,children:[e.jsx(v,{placeholder:"Current Password",type:$?"text":"password",value:N,onChange:s=>O(s.target.value),variant:"outlined",fullWidth:!0,InputProps:{endAdornment:e.jsx(R,{position:"end",children:e.jsx(L,{onClick:()=>ue(!$),edge:"end",sx:{borderRadius:10},children:$?e.jsx(M,{}):e.jsx(F,{})})}),sx:{borderRadius:2}}}),e.jsx(v,{placeholder:"New Password",type:z?"text":"password",value:d,onChange:s=>G(s.target.value),variant:"outlined",fullWidth:!0,InputProps:{endAdornment:e.jsx(R,{position:"end",children:e.jsx(L,{onClick:()=>he(!z),edge:"end",sx:{borderRadius:10},children:z?e.jsx(M,{}):e.jsx(F,{})})}),sx:{borderRadius:2}}}),d&&e.jsxs(a,{sx:{mb:2},children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:.5},children:[e.jsx(r,{variant:"caption",color:"text.secondary",children:"Password Strength"}),e.jsx(r,{variant:"caption",sx:{fontWeight:600,color:J()},children:We()})]}),e.jsx(Me,{variant:"determinate",value:P/4*100,sx:{height:6,borderRadius:3,backgroundColor:o(t.palette.divider,.3),"& .MuiLinearProgress-bar":{backgroundColor:J()}}}),e.jsx(r,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:1},children:"Use 8+ characters with a mix of uppercase, lowercase, numbers and symbols for best security"})]}),e.jsx(v,{placeholder:"Confirm New Password",type:B?"text":"password",value:u,onChange:s=>H(s.target.value),variant:"outlined",fullWidth:!0,error:d!==u&&u!=="",helperText:d!==u&&u!==""?"Passwords don't match":"",InputProps:{endAdornment:e.jsx(R,{position:"end",children:e.jsx(L,{onClick:()=>pe(!B),edge:"end",sx:{borderRadius:10},children:B?e.jsx(M,{}):e.jsx(F,{})})}),sx:{borderRadius:2}}}),e.jsxs(m,{variant:"contained",color:"primary",onClick:Ie,disabled:!N||!d||!u||S,sx:{borderRadius:2,alignSelf:"flex-start",px:4,position:"relative"},children:[S&&e.jsx(Fe,{size:24,sx:{position:"absolute",left:"50%",top:"50%",marginTop:"-12px",marginLeft:"-12px"}}),e.jsx("span",{style:{visibility:S?"hidden":"visible",color:"rgb(115, 115, 115)"},children:"Update Password"})]})]})]})]})})}),e.jsx(y,{value:l,index:2,children:e.jsx(h,{elevation:0,sx:{borderRadius:"16px",border:`1px solid ${o(t.palette.divider,.8)}`},children:e.jsxs(p,{sx:{p:0},children:[e.jsx(a,{sx:{p:3,borderBottom:`1px solid ${t.palette.divider}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:e.jsx(r,{variant:"h6",sx:{fontWeight:600},children:"Notifications"})}),e.jsx(a,{sx:{p:3},children:e.jsxs(I,{spacing:3,children:[e.jsx(K,{control:e.jsx(Q,{checked:me,onChange:s=>be(s.target.checked),color:"primary"}),label:"Enable Notifications"}),e.jsx(K,{control:e.jsx(Q,{checked:ge,onChange:s=>fe(s.target.checked),color:"primary"}),label:"Email Notifications"})]})})]})})}),e.jsx(y,{value:l,index:3,children:e.jsx(h,{elevation:0,sx:{borderRadius:"16px",border:`1px solid ${o(t.palette.divider,.8)}`},children:e.jsxs(p,{sx:{p:0},children:[e.jsx(a,{sx:{p:3,borderBottom:`1px solid ${t.palette.divider}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:e.jsx(r,{variant:"h6",sx:{fontWeight:600},children:"Billing Information"})}),e.jsx(a,{sx:{p:3},children:e.jsx(r,{variant:"body2",color:"text.secondary",children:"You are currently on the Free plan. Upgrade to a paid plan to unlock more features."})})]})})}),e.jsx(y,{value:l,index:4,children:e.jsx(h,{elevation:0,sx:{borderRadius:"16px",border:`1px solid ${o(t.palette.divider,.8)}`},children:e.jsxs(p,{sx:{p:0},children:[e.jsx(a,{sx:{p:3,borderBottom:`1px solid ${t.palette.divider}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:e.jsx(r,{variant:"h6",sx:{fontWeight:600},children:"Appearance"})}),e.jsx(a,{sx:{p:3},children:e.jsx(r,{variant:"body2",color:"text.secondary",children:"Change the look and feel of the app."})})]})})}),e.jsx(y,{value:l,index:5,children:e.jsx(h,{elevation:0,sx:{borderRadius:"16px",border:`1px solid ${o(t.palette.divider,.8)}`},children:e.jsxs(p,{sx:{p:0},children:[e.jsx(a,{sx:{p:3,borderBottom:`1px solid ${t.palette.divider}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:e.jsx(r,{variant:"h6",sx:{fontWeight:600},children:"Data & Privacy"})}),e.jsx(a,{sx:{p:3},children:e.jsx(r,{variant:"body2",color:"text.secondary",children:"Manage your data, privacy and consent settings."})})]})})})]})]})]}),e.jsx(Ke,{})]})]}),e.jsx(Ve,{open:re,autoHideDuration:6e3,onClose:()=>T(!1),anchorOrigin:{vertical:"bottom",horizontal:"right"},children:e.jsx(Oe,{severity:oe,onClose:()=>T(!1),sx:{borderRadius:2},children:ie})}),e.jsxs(Ge,{open:xe,onClose:()=>E(!1),maxWidth:"xs",fullWidth:!0,children:[e.jsx(He,{children:"Are you sure you want to delete your account?"}),e.jsx(Ye,{children:e.jsx(r,{variant:"body2",color:"text.secondary",children:"This action cannot be undone. Your data will be permanently deleted."})}),e.jsxs(Ze,{children:[e.jsx(m,{onClick:()=>E(!1),color:"primary",children:"Cancel"}),e.jsx(m,{onClick:Re,color:"error",disabled:Y==="deleting",children:Y==="deleting"?"Deleting...":"Delete Account"})]})]})]})}export{At as default};
