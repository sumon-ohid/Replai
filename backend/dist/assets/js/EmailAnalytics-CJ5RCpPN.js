import{ai as y,j as e,P as f,aM as n,w as i,a6 as g,S as j,aU as o}from"./mui-core-C3ffLUwq.js";import{a as x}from"./react-vendor-Unh15Wwx.js";import{c4 as C,E as S,L as I,c5 as A}from"./mui-icons-BgFiLgsU.js";import{m}from"./animations-Dee_auZ3.js";import{B as k}from"./mui-B3oaDO5C.js";function u({title:r,value:l,icon:a,color:s,isLoading:d=!1,delay:p=0,percentage:c}){const t=y(),h={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:300,damping:30,delay:p}}};return e.jsxs(f,{component:m.div,initial:"hidden",animate:"visible",variants:h,elevation:1,sx:{p:2.5,borderRadius:3,display:"flex",alignItems:"center",position:"relative",overflow:"hidden"},children:[e.jsx(n,{sx:{display:"flex",alignItems:"center",justifyContent:"center",p:1.5,borderRadius:2,backgroundColor:i(s,.12),color:s,mr:2},children:a}),e.jsxs(n,{sx:{flex:1},children:[e.jsx(g,{variant:"body2",color:"text.secondary",sx:{mb:.5},children:r}),d?e.jsx(j,{variant:"text",width:80,height:28}):e.jsxs(g,{variant:"h5",component:"div",sx:{fontWeight:600,display:"flex",alignItems:"center"},children:[l,c!==void 0&&e.jsxs(n,{component:"span",sx:{ml:1.5,fontSize:"0.75rem",fontWeight:500,px:1,py:.3,borderRadius:1,backgroundColor:i(t.palette.success.main,.1),color:t.palette.success.main},children:[c,"%"]})]})]}),e.jsx(n,{sx:{position:"absolute",top:-15,right:-15,width:100,height:100,borderRadius:"50%",backgroundColor:i(s,.04),zIndex:0}})]})}function z({stats:r={totalEmails:0,processedEmails:0,automatedResponses:0},refreshTrigger:l}){const a=y(),[s,d]=x.useState(!1),[p,c]=x.useState(!1),t={totalEmails:r?.totalEmails??0,processedEmails:r?.processedEmails??0,automatedResponses:r?.automatedResponses??0};x.useEffect(()=>{d(!0);const R=setTimeout(()=>{d(!1),c(!0)},600);return()=>clearTimeout(R)},[l]);const h=t.totalEmails>0?Math.round(t.automatedResponses/t.totalEmails*100):0,b=[{data:[t.totalEmails,t.processedEmails,t.automatedResponses],label:"Emails",color:a.palette.primary.main}],v={data:["Total","Processed","Automated"],scaleType:"band"},E={hidden:{opacity:0,scale:.9},visible:{opacity:1,scale:1,transition:{type:"spring",delay:.3,duration:.8}}};return e.jsxs(o,{container:!0,spacing:3,children:[e.jsx(o,{item:!0,xs:12,md:8,children:e.jsxs(f,{component:m.div,initial:"hidden",animate:"visible",variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}}},elevation:1,sx:{p:3,borderRadius:3,height:"100%",overflow:"hidden",position:"relative",minHeight:280,backgroundImage:a.palette.mode==="dark"?`linear-gradient(to right, ${i(a.palette.primary.dark,.05)}, ${i(a.palette.background.paper,1)})`:`linear-gradient(to right, ${i(a.palette.primary.light,.05)}, ${i(a.palette.background.paper,1)})`,boxShadow:a.shadows[1]},children:[e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[e.jsx(g,{variant:"h6",component:"h3",sx:{fontWeight:600},children:"Email Activity"}),e.jsxs(n,{component:m.div,animate:{opacity:[.7,1,.7],scale:[1,1.05,1]},transition:{duration:2,repeat:1/0,repeatDelay:.5},sx:{display:"flex",alignItems:"center",backgroundColor:i(a.palette.success.main,.1),color:a.palette.success.main,px:1.5,py:.5,borderRadius:5,fontSize:"0.875rem",fontWeight:500},children:[e.jsx(C,{sx:{mr:.5,fontSize:16}}),h,"% Response Rate"]})]}),s?e.jsx(n,{sx:{height:220,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(j,{variant:"rectangular",width:"100%",height:180,sx:{borderRadius:2}})}):e.jsx(n,{sx:{height:220},component:m.div,variants:E,initial:"hidden",animate:p?"visible":"hidden",children:e.jsx(k,{series:b,xAxis:[v],height:220,margin:{top:10,bottom:30,left:40,right:10},colors:[a.palette.primary.main,a.palette.secondary.main],sx:{".MuiChartsAxis-bottom .MuiChartsAxis-tickLabel":{fontWeight:500},".MuiChartsLegend-root":{display:"none"}}})},l)]})}),e.jsx(o,{item:!0,xs:12,md:4,children:e.jsxs(o,{container:!0,spacing:2,children:[e.jsx(o,{item:!0,xs:12,children:e.jsx(u,{title:"Total Emails",value:t.totalEmails.toLocaleString(),icon:e.jsx(S,{}),color:a.palette.primary.main,isLoading:s,delay:.1})}),e.jsx(o,{item:!0,xs:12,children:e.jsx(u,{title:"Processed Emails",value:t.processedEmails.toLocaleString(),icon:e.jsx(I,{}),color:a.palette.secondary.main,isLoading:s,delay:.2,percentage:t.totalEmails>0?Math.round(t.processedEmails/t.totalEmails*100):0})}),e.jsx(o,{item:!0,xs:12,children:e.jsx(u,{title:"Automated Responses",value:t.automatedResponses.toLocaleString(),icon:e.jsx(A,{}),color:a.palette.info.main,isLoading:s,delay:.3,percentage:t.processedEmails>0?Math.round(t.automatedResponses/t.processedEmails*100):0})})]})})]})}export{z as default};
