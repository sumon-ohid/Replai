import{al as B,j as e,P as v,w as o,as as k,ao as n,ap as i,U as w,W as A,T as S,X as $,Z as R,aX as W,aE as I,aN as L,Y as M,aq as T,x as D,an as P,ar as F,av as N,aw as Z}from"./mui-core-BvDVqQNt.js";import{S as H,A as V,H as X}from"./SideMenu-CsNVnQ_u.js";import{A as Y}from"./index-Ch2vCCmC.js";import{t as U,d as G,a as O,c as q}from"./treeView-DNJjjNft.js";import{a as b}from"./react-vendor-DaePdQuf.js";import{a as y}from"./utils-DW_MHI2K.js";import{aV as K,aW as Q,E as f,aX as J,aw as _,aO as ee,aY as te,aZ as ae}from"./mui-icons-BrpH9ATo.js";import{A as oe,m as h}from"./animations-GQCX1BUJ.js";import{D as re}from"./Footer-IM-HUNU_.js";import"./ColorModeIconDropdown-BU6ylaH-.js";import"./data-grid-Dlb7qzIv.js";const j="https://replai.tech";function se(){const[l,s]=b.useState([]),[d,u]=b.useState(""),[x,c]=b.useState(""),a=B(),m=a.palette.mode==="dark";b.useEffect(()=>{(async()=>{try{const r=localStorage.getItem("token"),p=await y.get(`${j}/api/blocklist`,{headers:{Authorization:`Bearer ${r}`}});s(p.data)}catch(r){console.error("Error fetching block list:",r)}})()},[]);const E=t=>{const r=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,p=/^@?(\*\.)?[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z]{2,}$/;return t.trim()===""?"Entry cannot be empty":!r.test(t)&&!p.test(t)?"Invalid email or domain format":l.includes(t)?"Entry already exists":null},C=async()=>{const t=E(d);if(t){c(t);return}try{const r=localStorage.getItem("token");await y.post(`${j}/api/blocklist`,{entry:d},{headers:{Authorization:`Bearer ${r}`}}),s([...l,d]),u(""),c("")}catch(r){console.error("Error adding new entry:",r)}},z=async t=>{try{const r=localStorage.getItem("token");await y.delete(`${j}/api/blocklist`,{headers:{Authorization:`Bearer ${r}`},params:{entry:t}}),s(l.filter(p=>p!==t))}catch(r){console.error("Error deleting entry:",r)}},g=t=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t);return e.jsxs(v,{elevation:0,sx:{position:"relative",overflowX:"hidden",bgcolor:m?o(a.palette.background.paper,.6):a.palette.background.paper,p:{xs:2,sm:1},borderRadius:3},children:[e.jsxs(k,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:3,children:[e.jsxs(n,{children:[e.jsx(i,{variant:"h5",fontWeight:700,gutterBottom:!0,children:"Block List"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Block unwanted emails or entire domains from reaching your inbox"})]}),e.jsx(w,{label:`${l.length} ${l.length===1?"entry":"entries"}`,color:"primary",variant:"outlined",icon:e.jsx(K,{}),sx:{fontWeight:500}})]}),e.jsxs(v,{elevation:0,sx:{p:3,mb:4,borderRadius:3,border:`1px solid ${o(a.palette.divider,.8)}`,bgcolor:m?o(a.palette.background.paper,.3):o(a.palette.background.paper,1)},children:[e.jsxs(i,{variant:"subtitle1",fontWeight:600,mb:2,sx:{display:"flex",alignItems:"center"},children:["Add New Block Entry",e.jsx(A,{title:"Add email addresses or domains to block. Use * for wildcard domains (e.g., *.example.com)",children:e.jsx(Q,{sx:{ml:1,fontSize:18,color:"text.secondary"}})})]}),e.jsxs(k,{direction:{xs:"column",sm:"row"},spacing:2,children:[e.jsx(S,{fullWidth:!0,variant:"outlined",value:d,placeholder:"Enter email address or domain to block",error:!!x,onChange:t=>{u(t.target.value),t.target.value&&c(E(t.target.value)||"")},onKeyPress:t=>t.key==="Enter"&&C(),InputProps:{startAdornment:e.jsx($,{position:"start",children:e.jsx(f,{fontSize:"small",color:"action"})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),e.jsx(R,{variant:"contained",startIcon:e.jsx(J,{}),onClick:C,disableElevation:!0,sx:{borderRadius:2,px:3,textTransform:"none",fontWeight:600,whiteSpace:"nowrap"},children:"Block Entry"})]}),e.jsx(W,{in:!!x,children:e.jsx(I,{severity:"error",sx:{mt:2,borderRadius:2},variant:"outlined",children:x})})]}),l.length>0?e.jsx(oe,{children:e.jsx(n,{component:h.div,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},sx:{borderRadius:3,overflow:"hidden",border:`1px solid ${o(a.palette.divider,.7)}`,bgcolor:m?"transparent":o(a.palette.background.default,.5)},children:l.map((t,r)=>e.jsxs(n,{component:h.div,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.2},sx:{display:"flex",alignItems:"center",justifyContent:"space-between",p:2.5,borderBottom:r<l.length-1?`1px solid ${o(a.palette.divider,.5)}`:"none","&:hover":{bgcolor:m?o(a.palette.action.hover,.1):o(a.palette.action.hover,.3)},transition:"background-color 0.2s ease"},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(L,{sx:{width:36,height:36,bgcolor:g(t)?o(a.palette.error.main,m?.2:.1):o(a.palette.warning.main,m?.2:.1),color:g(t)?a.palette.error.main:a.palette.warning.main},children:g(t)?e.jsx(f,{}):e.jsx(_,{})}),e.jsxs(n,{children:[e.jsx(i,{variant:"body2",fontWeight:500,fontFamily:"monospace",sx:{fontSize:"0.95rem",color:a.palette.text.primary},children:t}),e.jsx(i,{variant:"caption",color:"text.secondary",children:g(t)?"Email Address":"Domain"})]})]}),e.jsx(A,{title:"Remove from block list",children:e.jsx(M,{onClick:()=>z(t),sx:{color:"text.secondary","&:hover":{color:a.palette.error.main,bgcolor:o(a.palette.error.main,.1)}},children:e.jsx(ee,{fontSize:"small"})})})]},t))})}):e.jsxs(n,{component:h.div,initial:{opacity:0},animate:{opacity:1},sx:{py:5,textAlign:"center",border:`1px dashed ${o(a.palette.divider,.8)}`,borderRadius:3,bgcolor:o(a.palette.background.default,.4)},children:[e.jsx(f,{sx:{fontSize:48,color:o(a.palette.text.secondary,.5),mb:2}}),e.jsx(i,{variant:"h6",color:"text.secondary",fontWeight:500,children:"No Blocked Entries"}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mt:1,maxWidth:400,mx:"auto"},children:"Your block list is empty. Add email addresses or domains above to prevent them from reaching your inbox."})]})]})}const ie={...q,...O,...G,...U},ne={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.1}}},le={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:260,damping:20}}};function je(l){const s=B(),d=T(s.breakpoints.down("sm")),u=s.palette.mode==="dark",x=s.palette.primary.main,c=s.palette.secondary.main;return`${x}${s.palette.mode==="dark"?D(c,.1):c}`,e.jsxs(Y,{...l,themeComponents:ie,children:[e.jsx(P,{enableColorScheme:!0}),e.jsxs(n,{sx:{display:"flex"},children:[e.jsx(H,{}),e.jsx(V,{}),e.jsxs(n,{component:"main",sx:a=>({flexGrow:1,backgroundColor:o(a.palette.background.default,1),overflow:"auto",minHeight:"100vh"}),children:[e.jsx(k,{spacing:2,sx:{alignItems:"center",mx:{xs:2,sm:3},pb:2,mt:{xs:8,md:0},mb:{xs:2,sm:3}},children:e.jsx(X,{})}),e.jsx(F,{maxWidth:"xl",children:e.jsxs(n,{component:h.div,variants:ne,initial:"hidden",animate:"visible",sx:{px:{xs:1,sm:0,md:0},py:3},children:[e.jsxs(n,{component:h.div,variants:le,sx:{mb:4},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(te,{sx:{mr:1.5,fontSize:36,color:s.palette.error.main}}),e.jsx(i,{variant:d?"h5":"h4",component:"h1",sx:{fontWeight:700,background:"linear-gradient(90deg,rgb(0, 98, 255),rgb(43, 156, 255))",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Email Block List"})]}),e.jsx(i,{variant:"body1",sx:{color:"text.secondary",mb:2},children:"Manage your email security by adding domains or specific addresses to your block list. Blocked emails will be automatically filtered out of your inbox."}),e.jsx(v,{elevation:0,sx:{p:2,borderRadius:2,border:`1px solid ${o(s.palette.primary.main,.5)}`,backgroundColor:u?o(s.palette.primary.dark,.1):o(s.palette.primary.light,.1),mb:3},children:e.jsxs(I,{severity:"info",variant:"outlined",icon:e.jsx(ae,{}),sx:{borderRadius:1.5,"& .MuiAlert-message":{fontSize:"0.9rem"}},children:[e.jsx(i,{variant:"subtitle2",sx:{fontWeight:600},children:"How blocking works:"}),e.jsxs(i,{variant:"body2",children:["Email addresses or domains added to your block list won't be able to reach your inbox. You can block entire domains (e.g., ",e.jsx(w,{size:"small",label:"spam.com",sx:{fontSize:"0.75rem",height:22}}),") or specific addresses (e.g., ",e.jsx(w,{size:"small",label:"user@example.com",sx:{fontSize:"0.75rem",height:22}}),")."]})]})})]}),e.jsx(N,{elevation:0,children:e.jsx(Z,{sx:{p:0},children:e.jsx(se,{})})})]})}),e.jsx(re,{})]})]})]})}export{je as default};
