import{al as Ae,j as e,an as Te,ao as a,w as l,as as I,ap as r,av as m,aw as b,aK as De,aL as j,Z as g,a3 as Ne,aN as Ee,aX as $e,ay as w,T as v,X as R,U as ze,a0 as Be,$ as Le,D as Ue,Y as U,K as Fe,N as Me,H as q,au as Q,aO as Oe,aE as Ve,aA as Ge,aB as He,aC as Ze,aG as Ye}from"./mui-core-BvDVqQNt.js";import{a as i}from"./react-vendor-DaePdQuf.js";import{S as Ke,A as Xe,H as Je}from"./SideMenu-CsNVnQ_u.js";import{u as qe,A as Qe}from"./index-Ch2vCCmC.js";import{t as _e,d as et,a as tt,c as st}from"./treeView-DNJjjNft.js";import{D as at}from"./Footer-IM-HUNU_.js";import{h as rt,p as it,a$ as nt,b0 as ot,b1 as lt,b2 as dt,b3 as ct,b4 as xt,b5 as ut,aO as ht,b6 as F,b7 as M}from"./mui-icons-BrpH9ATo.js";import{m as W,A as pt}from"./animations-GQCX1BUJ.js";import"./ColorModeIconDropdown-BU6ylaH-.js";import"./utils-DW_MHI2K.js";import"./data-grid-Dlb7qzIv.js";const mt="https://replai.tech",bt={...st,...tt,...et,..._e};function y(A){const{children:t,value:d,index:h,...n}=A;return e.jsx("div",{role:"tabpanel",hidden:d!==h,id:`settings-tabpanel-${h}`,"aria-labelledby":`settings-tab-${h}`,...n,children:d===h&&e.jsx(pt,{mode:"wait",children:e.jsx(W.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},transition:{duration:.3},children:e.jsx(a,{sx:{pt:3},children:t})},h)})})}const gt={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},_={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:260,damping:20}}};function Tt(A){const t=Ae(),[d,h]=i.useState(0),{user:n,updateProfilePicture:ee,updateUserName:te,updatePassword:se}=qe(),[ae,O]=i.useState((n==null?void 0:n.profilePicture)||""),[re,T]=i.useState(!1),[ie,ne]=i.useState(""),[oe,le]=i.useState("success"),[D,de]=i.useState((n==null?void 0:n.name)||""),[ce,ft]=i.useState((n==null?void 0:n.email)||""),[N,V]=i.useState(""),[c,G]=i.useState(""),[p,H]=i.useState(""),[xe,E]=i.useState(!1),[Z,C]=i.useState("idle"),[$,ue]=i.useState(!1),[z,he]=i.useState(!1),[B,pe]=i.useState(!1),[P,Y]=i.useState(0),[S,k]=i.useState(!1),[me,be]=i.useState(!0),[ge,fe]=i.useState(!0),[je,ve]=i.useState("en"),[f,K]=i.useState(!1),[ye,L]=i.useState(!1),X=i.useRef(null),we=(s,o)=>{h(o)},Ce=()=>{L(!0)},Pe=()=>{L(!1),O((n==null?void 0:n.profilePicture)||"")},Se=async s=>{var o;if((o=s.target.files)!=null&&o[0]){const u=s.target.files[0];O(URL.createObjectURL(u));try{await ee(u),x("Profile picture updated successfully","success"),L(!1)}catch{x("Error updating profile picture","error")}}},ke=async()=>{k(!0);try{await te(D),x("Profile updated successfully","success"),K(!1)}catch{x("Error updating profile","error")}finally{k(!1)}},Ie=async()=>{if(c!==p){x("New passwords do not match","error");return}if(P<3){x("Password is not strong enough","error");return}k(!0);try{await se(N,c),x("Password updated successfully","success"),V(""),G(""),H(""),Y(0)}catch{x("Error updating password","error")}finally{k(!1)}},x=(s,o)=>{ne(s),le(o),T(!0)},Re=async()=>{C("deleting");try{const s=localStorage.getItem("token");if(!s)throw new Error("No token found");if(!(await fetch(`${mt}/api/user/account/delete`,{method:"DELETE",headers:{Authorization:`Bearer ${s}`}})).ok)throw new Error("Failed to delete account");C("success"),setTimeout(()=>window.location.href="/",2e3)}catch{C("error"),setTimeout(()=>C("idle"),2e3)}};i.useEffect(()=>{Y((o=>{if(!o)return 0;let u=0;return o.length>=8&&u++,/[A-Z]/.test(o)&&u++,/[0-9]/.test(o)&&u++,/[^A-Za-z0-9]/.test(o)&&u++,u})(c))},[c]);const J=()=>{switch(P){case 0:return t.palette.error.main;case 1:return t.palette.error.main;case 2:return t.palette.warning.main;case 3:return t.palette.success.light;case 4:return t.palette.success.main;default:return t.palette.error.main}},We=()=>{switch(P){case 0:return"Very Weak";case 1:return"Weak";case 2:return"Fair";case 3:return"Good";case 4:return"Strong";default:return"Very Weak"}};return e.jsxs(Qe,{...A,themeComponents:bt,children:[e.jsx(Te,{enableColorScheme:!0}),e.jsxs(a,{sx:{display:"flex"},children:[e.jsx(Ke,{}),e.jsx(Xe,{}),e.jsxs(a,{component:"main",sx:s=>({flexGrow:1,backgroundColor:l(s.palette.background.default,1),overflow:"auto",minHeight:"100vh"}),children:[e.jsx(I,{spacing:2,sx:{alignItems:"center",mx:{xs:2,sm:3},pb:2,mt:{xs:8,md:0}},children:e.jsx(Je,{})}),e.jsxs(a,{component:W.div,variants:gt,initial:"hidden",animate:"visible",sx:{mx:"auto",px:{xs:2,sm:3,md:4},pb:5},children:[e.jsxs(a,{component:W.div,variants:_,sx:{mb:3},children:[e.jsx(r,{variant:"h4",component:"h1",sx:{fontWeight:700,mb:1,background:"linear-gradient(90deg,rgb(0, 98, 255),rgb(43, 156, 255))",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Account Settings"}),e.jsx(r,{variant:"body1",color:"text.secondary",children:"Manage your personal information, security preferences and billing details"})]}),e.jsxs(a,{component:W.div,variants:_,sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:3},children:[e.jsx(a,{sx:{minWidth:{xs:"100%",md:260},maxWidth:{md:260},mt:{xs:0,md:3}},children:e.jsx(m,{elevation:0,sx:{borderRadius:"16px",border:`1px solid ${l(t.palette.divider,.8)}`,overflow:"hidden"},children:e.jsx(b,{sx:{p:0},children:e.jsxs(De,{value:d,onChange:we,orientation:"vertical",sx:{"& .MuiTab-root":{alignItems:"center",justifyContent:"flex-start",minHeight:60,px:2.5,textAlign:"left",textTransform:"none",fontWeight:500,fontSize:"0.95rem",borderLeft:"3px solid transparent","&.Mui-selected":{borderLeftColor:t.palette.primary.main,backgroundColor:l(t.palette.primary.main,.08)}},"& .MuiTabs-indicator":{display:"none"}},children:[e.jsx(j,{icon:e.jsx(rt,{}),iconPosition:"start",label:"Profile",id:"settings-tab-0","aria-controls":"settings-tabpanel-0"}),e.jsx(j,{icon:e.jsx(it,{}),iconPosition:"start",label:"Security",id:"settings-tab-1","aria-controls":"settings-tabpanel-1"}),e.jsx(j,{icon:e.jsx(nt,{}),iconPosition:"start",label:"Notifications",id:"settings-tab-3","aria-controls":"settings-tabpanel-3"}),e.jsx(j,{icon:e.jsx(ot,{}),iconPosition:"start",label:"Billing",id:"settings-tab-2","aria-controls":"settings-tabpanel-2"}),e.jsx(j,{icon:e.jsx(lt,{}),iconPosition:"start",label:"Appearance",id:"settings-tab-4","aria-controls":"settings-tabpanel-4"}),e.jsx(j,{icon:e.jsx(dt,{}),iconPosition:"start",label:"Data & Privacy",id:"settings-tab-5","aria-controls":"settings-tabpanel-5"})]})})})}),e.jsxs(a,{sx:{flexGrow:1},children:[e.jsx(y,{value:d,index:0,children:e.jsx(m,{elevation:0,sx:{borderRadius:"16px",border:`1px solid ${l(t.palette.divider,.8)}`,overflow:"hidden"},children:e.jsxs(b,{sx:{p:0},children:[e.jsxs(a,{sx:{p:3,mb:2,borderBottom:`1px solid ${t.palette.divider}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(r,{variant:"h6",sx:{fontWeight:600},children:"Personal Information"}),e.jsx(g,{startIcon:f?e.jsx(ct,{}):e.jsx(xt,{}),variant:f?"contained":"outlined",size:"small",onClick:()=>{f?ke():K(!0)},disabled:S,sx:{borderRadius:2},children:f?"Save":"Edit"})]}),e.jsxs(a,{sx:{px:3,pb:3},children:[e.jsxs(a,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},alignItems:{xs:"center",sm:"flex-start"},gap:3,mb:4},children:[e.jsxs(a,{sx:{position:"relative"},children:[e.jsx(Ne,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:e.jsx(a,{onClick:Ce,sx:{width:36,height:36,borderRadius:"50%",backgroundColor:t.palette.primary.main,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",border:`2px solid ${t.palette.background.paper}`,boxShadow:t.shadows[2],"&:hover":{backgroundColor:t.palette.primary.dark}},children:e.jsx(ut,{sx:{color:"#fff",fontSize:18}})}),children:e.jsx(Ee,{src:ae,alt:D,sx:{width:100,height:100,border:`3px solid ${t.palette.background.paper}`,boxShadow:`0 0 0 2px ${l(t.palette.primary.main,.3)}`}})}),e.jsxs($e,{in:ye,sx:{mt:2,textAlign:"center"},children:[e.jsxs(I,{direction:"row",spacing:1,justifyContent:"center",children:[e.jsx(g,{variant:"contained",size:"small",onClick:()=>{var s;return(s=X.current)==null?void 0:s.click()},sx:{borderRadius:2},children:"Choose File"}),e.jsx(g,{variant:"outlined",size:"small",onClick:Pe,sx:{borderRadius:2},children:"Cancel"})]}),e.jsx("input",{ref:X,type:"file",hidden:!0,accept:"image/*",onChange:Se})]})]}),e.jsxs(a,{sx:{flex:1,mt:1},children:[e.jsx(r,{variant:"subtitle1",sx:{fontWeight:600,mb:.5},children:"Profile Photo"}),e.jsx(r,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Upload a clear photo to help others recognize you. JPG or PNG format recommended."})]})]}),e.jsxs(w,{container:!0,spacing:3,children:[e.jsxs(w,{item:!0,xs:12,sm:6,children:[e.jsx(r,{variant:"subtitle1",sx:{fontWeight:100,mb:.5,ml:2,fontSize:"0.6rem"},children:"Full Name"}),e.jsx(v,{value:D,onChange:s=>de(s.target.value),variant:"outlined",fullWidth:!0,disabled:!f,InputProps:{sx:{borderRadius:2}}})]}),e.jsxs(w,{item:!0,xs:12,sm:6,children:[e.jsx(r,{variant:"subtitle1",sx:{fontWeight:100,mb:.5,ml:2,fontSize:"0.6rem"},children:"Email Address"}),e.jsx(v,{value:ce,variant:"outlined",fullWidth:!0,disabled:!0,InputProps:{sx:{borderRadius:2},endAdornment:e.jsx(R,{position:"end",children:e.jsx(ze,{label:"Verified",size:"small",color:"success",variant:"outlined",sx:{borderRadius:1}})})}})]}),e.jsx(w,{item:!0,xs:12,sm:6,children:e.jsxs(Be,{fullWidth:!0,variant:"outlined",children:[e.jsx(r,{variant:"subtitle1",sx:{fontWeight:100,mb:.5,ml:2,fontSize:"0.6rem"},children:"Language"}),e.jsx(Le,{value:je,onChange:s=>ve(s.target.value),label:"Language",disabled:!f,sx:{borderRadius:2},children:e.jsx(Ue,{value:"en",children:"English"})})]})}),e.jsxs(w,{item:!0,xs:12,sm:6,children:[e.jsx(r,{variant:"subtitle1",sx:{fontWeight:100,mb:.5,ml:2,fontSize:"0.6rem"},children:"Timezone"}),e.jsx(v,{value:"(UTC-auto) Coordinated Universal Time",variant:"outlined",fullWidth:!0,disabled:!0,InputProps:{sx:{borderRadius:2}}})]})]}),e.jsx(a,{sx:{mt:5,pt:4,borderTop:`1px solid ${t.palette.divider}`},children:e.jsxs(a,{sx:{p:3,borderRadius:2,backgroundColor:l(t.palette.error.main,.08),border:`1px solid ${l(t.palette.error.main,.2)}`},children:[e.jsx(r,{variant:"subtitle1",color:"error",sx:{fontWeight:600,mb:1},children:"Danger Zone"}),e.jsx(r,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Once you delete your account, there is no going back. Please be certain."}),e.jsx(g,{variant:"outlined",color:"error",onClick:()=>E(!0),startIcon:e.jsx(ht,{}),sx:{borderRadius:2},children:"Delete My Account"})]})})]})]})})}),e.jsx(y,{value:d,index:1,children:e.jsx(m,{elevation:0,sx:{borderRadius:"16px",border:`1px solid ${l(t.palette.divider,.8)}`},children:e.jsxs(b,{sx:{p:0},children:[e.jsx(a,{sx:{p:3,borderBottom:`1px solid ${t.palette.divider}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:e.jsx(r,{variant:"h6",sx:{fontWeight:600},children:"Password & Security"})}),e.jsxs(a,{sx:{p:3},children:[e.jsx(r,{variant:"subtitle1",sx:{mb:3,fontWeight:500},children:"Change Password"}),e.jsxs(I,{spacing:3,children:[e.jsx(v,{placeholder:"Current Password",type:$?"text":"password",value:N,onChange:s=>V(s.target.value),variant:"outlined",fullWidth:!0,InputProps:{endAdornment:e.jsx(R,{position:"end",children:e.jsx(U,{onClick:()=>ue(!$),edge:"end",sx:{borderRadius:10},children:$?e.jsx(F,{}):e.jsx(M,{})})}),sx:{borderRadius:2}}}),e.jsx(v,{placeholder:"New Password",type:z?"text":"password",value:c,onChange:s=>G(s.target.value),variant:"outlined",fullWidth:!0,InputProps:{endAdornment:e.jsx(R,{position:"end",children:e.jsx(U,{onClick:()=>he(!z),edge:"end",sx:{borderRadius:10},children:z?e.jsx(F,{}):e.jsx(M,{})})}),sx:{borderRadius:2}}}),c&&e.jsxs(a,{sx:{mb:2},children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:.5},children:[e.jsx(r,{variant:"caption",color:"text.secondary",children:"Password Strength"}),e.jsx(r,{variant:"caption",sx:{fontWeight:600,color:J()},children:We()})]}),e.jsx(Fe,{variant:"determinate",value:P/4*100,sx:{height:6,borderRadius:3,backgroundColor:l(t.palette.divider,.3),"& .MuiLinearProgress-bar":{backgroundColor:J()}}}),e.jsx(r,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:1},children:"Use 8+ characters with a mix of uppercase, lowercase, numbers and symbols for best security"})]}),e.jsx(v,{placeholder:"Confirm New Password",type:B?"text":"password",value:p,onChange:s=>H(s.target.value),variant:"outlined",fullWidth:!0,error:c!==p&&p!=="",helperText:c!==p&&p!==""?"Passwords don't match":"",InputProps:{endAdornment:e.jsx(R,{position:"end",children:e.jsx(U,{onClick:()=>pe(!B),edge:"end",sx:{borderRadius:10},children:B?e.jsx(F,{}):e.jsx(M,{})})}),sx:{borderRadius:2}}}),e.jsxs(g,{variant:"contained",color:"primary",onClick:Ie,disabled:!N||!c||!p||S,sx:{borderRadius:2,alignSelf:"flex-start",px:4,position:"relative"},children:[S&&e.jsx(Me,{size:24,sx:{position:"absolute",left:"50%",top:"50%",marginTop:"-12px",marginLeft:"-12px"}}),e.jsx("span",{style:{visibility:S?"hidden":"visible",color:"rgb(115, 115, 115)"},children:"Update Password"})]})]})]})]})})}),e.jsx(y,{value:d,index:2,children:e.jsx(m,{elevation:0,sx:{borderRadius:"16px",border:`1px solid ${l(t.palette.divider,.8)}`},children:e.jsxs(b,{sx:{p:0},children:[e.jsx(a,{sx:{p:3,borderBottom:`1px solid ${t.palette.divider}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:e.jsx(r,{variant:"h6",sx:{fontWeight:600},children:"Notifications"})}),e.jsx(a,{sx:{p:3},children:e.jsxs(I,{spacing:3,children:[e.jsx(q,{control:e.jsx(Q,{checked:me,onChange:s=>be(s.target.checked),color:"primary"}),label:"Enable Notifications"}),e.jsx(q,{control:e.jsx(Q,{checked:ge,onChange:s=>fe(s.target.checked),color:"primary"}),label:"Email Notifications"})]})})]})})}),e.jsx(y,{value:d,index:3,children:e.jsx(m,{elevation:0,sx:{borderRadius:"16px",border:`1px solid ${l(t.palette.divider,.8)}`},children:e.jsxs(b,{sx:{p:0},children:[e.jsx(a,{sx:{p:3,borderBottom:`1px solid ${t.palette.divider}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:e.jsx(r,{variant:"h6",sx:{fontWeight:600},children:"Billing Information"})}),e.jsx(a,{sx:{p:3},children:e.jsx(r,{variant:"body2",color:"text.secondary",children:"You are currently on the Free plan. Upgrade to a paid plan to unlock more features."})})]})})}),e.jsx(y,{value:d,index:4,children:e.jsx(m,{elevation:0,sx:{borderRadius:"16px",border:`1px solid ${l(t.palette.divider,.8)}`},children:e.jsxs(b,{sx:{p:0},children:[e.jsx(a,{sx:{p:3,borderBottom:`1px solid ${t.palette.divider}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:e.jsx(r,{variant:"h6",sx:{fontWeight:600},children:"Appearance"})}),e.jsx(a,{sx:{p:3},children:e.jsx(r,{variant:"body2",color:"text.secondary",children:"Change the look and feel of the app."})})]})})}),e.jsx(y,{value:d,index:5,children:e.jsx(m,{elevation:0,sx:{borderRadius:"16px",border:`1px solid ${l(t.palette.divider,.8)}`},children:e.jsxs(b,{sx:{p:0},children:[e.jsx(a,{sx:{p:3,borderBottom:`1px solid ${t.palette.divider}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:e.jsx(r,{variant:"h6",sx:{fontWeight:600},children:"Data & Privacy"})}),e.jsx(a,{sx:{p:3},children:e.jsx(r,{variant:"body2",color:"text.secondary",children:"Manage your data, privacy and consent settings."})})]})})})]})]})]}),e.jsx(at,{})]})]}),e.jsx(Oe,{open:re,autoHideDuration:6e3,onClose:()=>T(!1),anchorOrigin:{vertical:"bottom",horizontal:"right"},children:e.jsx(Ve,{severity:oe,onClose:()=>T(!1),sx:{borderRadius:2},children:ie})}),e.jsxs(Ge,{open:xe,onClose:()=>E(!1),maxWidth:"xs",fullWidth:!0,children:[e.jsx(He,{children:"Are you sure you want to delete your account?"}),e.jsx(Ze,{children:e.jsx(r,{variant:"body2",color:"text.secondary",children:"This action cannot be undone. Your data will be permanently deleted."})}),e.jsxs(Ye,{children:[e.jsx(g,{onClick:()=>E(!1),color:"primary",children:"Cancel"}),e.jsx(g,{onClick:Re,color:"error",disabled:Z==="deleting",children:Z==="deleting"?"Deleting...":"Delete Account"})]})]})]})}export{Tt as default};
